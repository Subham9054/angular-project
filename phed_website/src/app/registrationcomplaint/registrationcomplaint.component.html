<div class="inner-area">
  <div class="bannerarea">
    <div class="container">
      <div class="bannerarea-content">
        <div>
          <div class="page-title">
            <h2>{{ 'ComplaintRegistration' | translate }}</h2>
          </div>
          <div class="breadcrumb-area">
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb  mb-0">
                <li class="breadcrumb-item"><a href="#"><i class="icon icon-Group-14936"></i></a></li>
                <li class="breadcrumb-item active" aria-current="page">{{ 'ComplaintRegistration' | translate }}</li>
              </ol>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="content-area" id="targetMainContent">
    <div class="container">
      <div class="form-title">
        <h4 class="fw-bold">{{ 'ComplaintRegistration' | translate }}</h4>
        <small class="text-danger">(<strong>*</strong>) {{ 'Mandatory' | translate }}</small>
      </div>
      <div class="row gx-xl-5">
        <div class="col-lg-6">  
          <div class="bg-light p-4 mb-3 mb-lg-0 rounded h-100">      
          <div class="row">
            <div class="col-lg-12">
              <h4 class="page-heading mt-0">{{ 'ComplainantDetails' | translate }}</h4>
            </div>
            <!-- <div class="col-lg-4">
            <div class="form-group">
                <label for="Regd Date" class="form-label">Regd Date</label>
                <input type="date" class="form-control"  >
            </div>
      </div> -->
            <div class="col-xl-12">
              <div class="form-group">
                <label for="Name" class="form-label">{{ 'NAME' | translate }} <span class="text-danger">*</span></label>
                <input name="txtName" type="text" id="txtName" [(ngModel)]="formData.txtName" required class="form-control" maxlength="100" />
                <!-- <small class="text-danger d-block text-end"> (Maximum <strong>100</strong> Characters)</small> -->
              </div>
            </div>
            <div class="col-xl-6">
              <div class="form-group">
                <label for="Phone Number" class="form-label">{{ 'PhoneNumber' | translate }} <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text" id="basic-addon1">+91</span>
                  <input name="txtPhone" type="text" maxlength="10" id="txtPhone" [(ngModel)]="formData.txtPhone" class="form-control" />
                  <a class="input-group-text btn btn-primary" href="javascript:void(0);" (click)="openModal()" data-bs-toggle="modal" data-bs-target="#verifyMobileModal">
                    <i class="bi bi-check-circle"></i>
                  </a>
                </div>
              </div>
            </div>
            <div class="col-xl-6">
              <div class="form-group">
                <label class="form-label">{{ 'E_Mail' | translate }}</label>
                <div class="input-group">
                  <input name="txtEmail" type="text" id="txtEmail" [(ngModel)]="formData.txtEmail" class="form-control" />
                  <a class="input-group-text btn btn-primary" href="javascript:void(0);" data-bs-toggle="modal"
                    data-bs-target="#verifyEmailModal"><i class="bi bi-check-circle"></i></a>
                </div>
              </div>
            </div>
            <div class="col-xl-6">
              <div class="form-group">
                <label for="Complaint Category" class="form-label">{{ 'ComplaintCategory' | translate }} <span
                    class="text-danger">*</span></label>
                    <!-- <select name="ddlComplaintCategory" id="ddlComplaintCategory"
                    [(ngModel)]="formData.ddlComplaintCategory"
                    (change)="onCategoryChange($event)" class="form-select">
                    <option selected value="0">Select</option>
                    <option *ngFor="let category of categories"
                        [value]="category.inT_CATEGORY_ID">{{ category.vcH_CATEGORY }}
                    </option>
                </select> -->
                <ng-select
                [items]="categories"
                bindLabel="vcH_CATEGORY"
                bindValue="inT_CATEGORY_ID"
                [(ngModel)]="formData.ddlComplaintCategory"
                [id]="'ddlComplaintCategory'"
                (change)="onCategoryChange($event)"
                [placeholder]="'Select Category'"
                [searchable]="true"
                [clearable]="false">
              </ng-select>
              </div>
            </div>
            <div class="col-xl-6">
              <div class="form-group">
                <label for="Complaint Sub-Category" class="form-label">{{ 'NAME' | translate }} <span
                    class="text-danger">*</span></label>
                    <select name="ddlSubCategory" id="ddlSubCategory"
                    [(ngModel)]="formData.ddlSubCategory" class="form-select">
                    <option value="0">Select</option>
                    <option *ngFor="let subcategory of subcategories"
                        [value]="subcategory.inT_SUB_CATEGORY_ID">{{
                        subcategory.vcH_SUB_CATEGORY }}
                    </option>
                </select>
              </div>
            </div>
            <!-- <div class="col-lg-12 d-none d-lg-block"></div>
            <div class="col-lg-4 col-xl-4">
              <div class="form-group">
                <label for="Nature of Document" class="form-label">Nature of Document <span
                    class="text-danger">*</span></label>
                <input type="text" class="form-control">
              </div>
            </div> -->

            <div class="col-xl-12">
              <div class="form-group"> 
                <label for="FileUpload1" class="form-label">
                  {{ 'UploadDocument' | translate }} <span class="text-danger">*</span>
                </label>
                <div class="input-group custom-file-input">
                  <input type="file" name="FileUpload1" id="FileUpload1"
                      (change)="handleFileInput($event)" class="form-control custom-fileupload" />
                  <label class="custom-input" [ngClass]="{'custom-input-black': fileName}" for="doc">
                      {{ fileName || 'Upload' }}
                  </label>
                  <label class="input-group-text custom-browse" for="doc">Browse</label>
              </div>
                <!-- <div class="input-group">
                  <input type="file" name="FileUpload1" id="FileUpload1" (change)="handleFileInput($event)"
                    class="form-control" />
                </div> -->
                <!-- <div class="d-flex align-items-center"> -->
                <!-- <div class="input-group custom-file-input">
                  <input type="file" name="FileUpload1" id="FileUpload1" (change)="handleFileInput($event)"
                  class="form-control custom-fileupload" />
                  <label class="custom-input" for="doc">Upload</label>
                  <label class="input-group-text custom-browse" for="doc">Browse</label>
              </div> -->
              <!-- <a href="#" class="btn btn-primary" title="Add More Document/Photo"><i class="bi bi-plus-lg"></i></a>
            </div> -->
                <small class="text-danger d-block text-end">
                  {{ 'SupportedFile' | translate }}
                </small>
              </div>
              <!-- <p class="mb-0 small text-danger text-end">
                  Supported File (<span class="fw-bold">.pdf, .doc, .xls, .jpg, .png</span>)
              </p> -->
          </div>
            
            
          
            <!-- <div class="col-lg-12 d-none d-lg-block"></div>
            <div class="col-lg-4">
              <div class="form-group">
                <label class="form-label">Upload Photo <span class="text-danger">*</span></label>
                <div class="custom-dropzone photoUpload" ngx-dropzone [accept]="'image/*'" (change)="onSelect($event)">
                  <ngx-dropzone-label>
                    <div>
                      <p class="mb-0">Drag and Drop <span class="d-block">or</span>Click to Upload Photo</p>
                    </div>
                  </ngx-dropzone-label>
                  <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files" [file]="f"
                    [removable]="true" (removed)="onRemove(f)">
                    <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
                  </ngx-dropzone-image-preview>
                </div>
                <p class="small mb-0 text-end text-danger">Max file Size <span class="fw-bold">1 mb</span></p>
              </div>
            </div> -->
            <div class="col-lg-12">
              <div class="form-group">
                <label for="Enter Complaint Description in Brief" class="form-label">{{ 'ComplaintDescription' | translate }}</label>
                <textarea name="txtDetailsE" rows="3" id="txtDetailsE"
                  [(ngModel)]="formData.txtDetailsE" class="form-control"></textarea>
                <small class="text-danger d-block text-end">{{ 'MaximumFivehundred' | translate }}</small>
              </div>
            </div>
          </div>
        </div>
      </div> 
        <div class="col-lg-6">
          <div class="bg-light p-4 rounded h-100"> 
          <div class="row">
            <div class="col-lg-12">
              <h4 class="page-heading mt-0">{{ 'Addre' | translate }}</h4>
            </div>
            <div class="col-xl-6">
              <div class="form-group">
                <label for="ddlDistrict" class="form-label">{{ 'Dist' | translate }} <span class="text-danger">*</span></label>
                <ng-select
                [items]="districts"
                bindLabel="vcH_DIST_NAME"
                bindValue="inT_DIST_ID"
                [(ngModel)]="formData.ddlDistrict"
                [id]="'ddlDistrict'"
                (change)="onDistrictChange($event)"
                [placeholder]="'Select a District'"
                [searchable]="true"
                [clearable]="false">
              </ng-select>
              </div>
            </div>
            
            
            <!-- <div class="col-lg-4">
              <div class="form-group">
                  <label for="Mode of Complaint" class="form-label">Mode of Complaint <span class="text-danger">*</span></label>
                  <select class="form-select" >
                      <option selected>Select</option>
                      <option value="1">Online</option>
                      <option value="2">Offline</option>
                    </select>
                    
                </div>
          </div> -->
          <div class="col-xl-6">
              <div class="form-group">
                <label for="ddlBlock" class="form-label">{{ 'Blo' | translate }} <span class="text-danger">*</span></label>
                <ng-select
                [items]="blocks"
                bindLabel="vcH_BLOCK_NAME"
                bindValue="inT_BLOCK_ID"
                [(ngModel)]="formData.ddlBlock"
                [id]="'ddlBlock'"
                (change)="onBlockChange($event)"
                [placeholder]="'Select a block'"
                [searchable]="true"
                [clearable]="false">
              </ng-select>
                <!-- <select name="ddlBlock" id="ddlBlock" [(ngModel)]="formData.ddlBlock"
                                        (change)="onBlockChange($event)" class="form-select">
                                        <option value="0">Select</option>
                                        <option *ngFor="let block of blocks" [value]="block.inT_BLOCK_ID">{{
                                            block.vcH_BLOCK_NAME }}
                                        </option>
                                    </select> -->
              </div>
            </div>
    
            <div class="col-xl-6">
              <div class="form-group">
                <label for="ddlPanchayat" class="form-label">{{ 'Pan' | translate }} <span class="text-danger">*</span></label>
                <!-- <select name="ddlGp" id="ddlGp" [(ngModel)]="formData.ddlPanchayat"
                                        (change)="onGpChange($event)" class="form-select">
                                        <option value="0">Select</option>
                                        <option *ngFor="let gp of gps" [value]="gp.inT_GP_ID">{{ gp.vcH_GP_NAME }}</option>
                                    </select> -->
                                    <ng-select
                                    [items]="gps"
                                    bindLabel="vcH_GP_NAME"
                                    bindValue="inT_GP_ID"
                                    [(ngModel)]="formData.ddlGp"
                                    [id]="'ddlPanchayat'"
                                    (change)="onGpChange($event)"
                                    [placeholder]="'Select a Gp'"
                                    [searchable]="true"
                                    [clearable]="false">
                                  </ng-select>                    
              </div>
            </div>
    
            <div class="col-xl-6">
              <div class="form-group">
                <label for="ddlVillage" class="form-label">{{ 'Vill' | translate }} <span class="text-danger">*</span></label>
                <!-- <select name="ddlVillage" id="ddlVillage" [(ngModel)]="formData.ddlVillage"
                                        class="form-select">
                                        <option value="0">Select</option>
                                        <option *ngFor="let village of villages" [value]="village.inT_VILLAGE_ID">{{
                                            village.vcH_VILLAGE_NAME }}</option>
                                    </select> -->

                                    <ng-select
                                    [items]="villages"
                                    bindLabel="vcH_VILLAGE_NAME"
                                    bindValue="inT_VILLAGE_ID"
                                    [(ngModel)]="formData.ddlVillage"
                                    [id]="'ddlVillage'"
                                    (change)="onVillageChange($event)"
                                    [placeholder]="'Select a village'"
                                    [searchable]="true"
                                    [clearable]="false">
                                  </ng-select>                             
              </div>
            </div>
            <div class="col-xl-6">
              <div class="form-group">
                <label for="ddlward" class="form-label">{{ 'War' | translate }} </label>
                <!-- <select name="ddlward" id="ddlward" [(ngModel)]="formData.ddlward" class="form-select">
                  <option value="0">Select</option>
                                        <option *ngFor="let ward of wards" [value]="ward.inT_WARD_ID">{{
                                            ward.vcH_WARD_NAME }}</option>
                </select> -->
                                    <ng-select id="ddlward"
                                    [items]="wards"
                                    bindLabel="vcH_WARD_NAME"
                                    bindValue="inT_WARD_ID"
                                    [(ngModel)]="formData.ddlward"
                                    [id]="'ddlward'"
                                    [placeholder]="'Select a ward'"
                                    [searchable]="true"
                                    [clearable]="false">
                                  </ng-select>   
              </div>
            </div>
            <div class="col-xl-6">
              <div class="form-group">
                <label for="Panchyat" class="form-label">{{ 'Near' | translate }}</label>
                <div class="input-group">
                  <input type="text" name="txtlandmark" rows="3" id="txtlandmark"
                                        [(ngModel)]="formData.txtLandmark" class="form-control">
                  <span class="input-group-text" id="basic-addon1"><i class="bi bi-geo-alt"></i></span>
                </div>
              </div>
            </div>
            <!-- </div>
            <div class="row"> -->
    
            <div class="col-lg-12">
              <div class="form-group">
                <label for="Address" class="form-label">{{ 'Addre' | translate }}</label>
                <textarea name="txtAddress" rows="3" id="txtAddress" [(ngModel)]="formData.txtAddress" class="form-control"></textarea>
                <small class="text-danger d-block text-end">{{ 'MaximumThreehundred' | translate }}</small>
              </div>
            </div>
          </div>
          </div>
        </div>

        <div class="col-12 mt-4">
          <div class="d-flex gap-2 justify-content-center">
            <a href="javascript:void(0)" class="btn btn-primary" (click)="onSubmit()">{{ 'SUBMIT' | translate }}</a>
            <a href="javascript:void(0)" class="btn btn-danger" (click)="resetForm()">{{ 'RESET' | translate }}</a>
          </div>
        </div>
      </div>

      
    </div>
  </div>
</div>


<!-- OTP Modal -->
<div class="modal fade otp-modal" id="verifyMobileModal" tabindex="-1" aria-labelledby="verifyMobileModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-md">
      <div class="modal-content">
          <div class="modal-body text-center p-5">
            <!-- <button type="button" (click)="doSomething()" >Clsoe</button> -->
              <button type="button" class="btn-close" (click)="closeModal()" aria-label="Close"></button>
              <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
              <h3 class="mb-4">OTP Verification</h3>
              <h5>Wait a while for OTP to receive
                  <small class="text-secondary d-block">Sent to your mobile number</small>
              </h5>
              <div class="mx-1">
                <div class="row">
                  <div class="col">
                    <input type="number" class="form-control form-control-lg" [(ngModel)]="otpValues[0]" (input)="moveToNext(0)" #otp0 />
                  </div>
                  <div class="col">
                    <input type="number" class="form-control form-control-lg" [(ngModel)]="otpValues[1]" (input)="moveToNext(1)" #otp1 />
                  </div>
                  <div class="col">
                    <input type="number" class="form-control form-control-lg" [(ngModel)]="otpValues[2]" (input)="moveToNext(2)" #otp2 />
                  </div>
                  <div class="col">
                    <input type="number" class="form-control form-control-lg" [(ngModel)]="otpValues[3]" (input)="moveToNext(3)" #otp3 />
                  </div>
                  <div class="col">
                    <input type="number" class="form-control form-control-lg" [(ngModel)]="otpValues[4]" (input)="moveToNext(4)" #otp4 />
                  </div>
                  <div class="col">
                    <input type="number" class="form-control form-control-lg" [(ngModel)]="otpValues[5]" (input)="moveToNext(5)" #otp5 />
                  </div>
                </div>
              </div>
              <div class="my-4 d-flex justify-content-between text-secondary">Didn't receive OTP yet?
                <div *ngIf="timer > 0">
                  <p>Time Remaining: {{ formattedTime }}</p>
                </div>
                
              </div>
              <div class="d-grid">
                  <button type="button" class="btn btn-primary" (click)="mobOtp()">Verify OTP</button>
              </div>
          </div>
      </div>
  </div>
</div>





<!-- Verify Email Modal -->
<div class="modal fade otp-modal" id="verifyEmailModal" tabindex="-1" aria-labelledby="verifyEmailModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-md">
    <div class="modal-content">

      <div class="modal-body text-center p-5">
        
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        <h3 class="mb-4">OTP Verification</h3>
        <h5>Wait a while for OTP to receive
          <small class="text-secondary d-block">Sent to your Email ID</small>
        </h5>
        <div class="mx-1">
          <div class="row">
            <div class="col">
              <input type="number" class="form-control form-control-lg">
            </div>
            <div class="col">
              <input type="number" class="form-control form-control-lg">
            </div>
            <div class="col">
              <input type="number" class="form-control form-control-lg">
            </div>
            <div class="col">
              <input type="number" class="form-control form-control-lg">
            </div>
            <div class="col">
              <input type="number" class="form-control form-control-lg">
            </div>
            <div class="col">
              <input type="number" class="form-control form-control-lg">
            </div>
          </div>
        </div>
        <div class="my-4 d-flex justify-content-between text-secondary">Didn't receive OTP yet?
          <div>
            <span class="d-block">02:00 min</span>
            <!-- <a href="#">Resend OTP</a> -->
          </div>
        </div>
        <div class="d-grid">
          <button type="button" class="btn btn-primary">Verify OTP</button>
        </div>
      </div>

    </div>
  </div>
</div>